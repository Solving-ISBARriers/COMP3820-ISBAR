(this["webpackJsonpisbar-complex-react"]=this["webpackJsonpisbar-complex-react"]||[]).push([[0],{258:function(e,t,n){},314:function(e,t){},316:function(e,t){},357:function(e,t){},358:function(e,t){},448:function(e,t,n){},453:function(e,t,n){"use strict";n.r(t);var a=n(9),i=n.n(a),s=n(238),r=n.n(s),c=(n(258),n(2)),o=n(4),l=n(5),u=n(6),d=n(251),h=n(30),j=n(96),b=n(3),p=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){j.oauth2.authorize({clientId:"my-client-id",scope:"launch openid fhirUser patient/*.read patient/*.write",redirectUri:"./isbar-app",completeInTarget:!0})}},{key:"render",value:function(){return Object(b.jsx)("div",{className:"loading-container",children:"Launching the ISBAR handover form.."})}}]),n}(i.a.Component),O=i.a.createContext({}),x=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={client:null,error:null},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;j.oauth2.ready().then((function(t){return e.setState({client:t})}),(function(t){return e.setState({error:t})}))}},{key:"render",value:function(){var e=this;return Object(b.jsx)(O.Provider,{value:this.state||{},children:Object(b.jsx)(O.Consumer,{children:function(t){var n=t.client,a=t.error;return console.log("Load success!"),console.log(n),a?Object(b.jsx)("pre",{children:a.stack}):n?e.props.children:Object(b.jsx)("div",{className:"loading-container",children:"Launching the ISBAR handover form.."})}})})}}]),n}(i.a.Component),m=n(62),v=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={value:""},a.handleChange=a.handleChange.bind(Object(m.a)(a)),a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.item.hasOwnProperty("answer")?this.setState({value:this.props.item.answer[0].valueString}):this.setState({value:""})}},{key:"handleChange",value:function(e){this.setState({value:e.target.value}),this.props.handleChange(e,this.props.index)}},{key:"getValue",value:function(){return this.state.value}},{key:"render",value:function(){return!1===this.props.render?Object(b.jsx)("div",{}):Object(b.jsxs)("div",{className:"textarea-container row",children:[Object(b.jsx)("div",{className:"textarea-label",children:Object(b.jsx)("label",{htmlFor:this.props.formID,children:this.props.label})}),Object(b.jsx)("div",{className:"textarea-content",children:Object(b.jsx)("textarea",{style:{resize:"none"},id:this.props.formID,name:this.props.formID,placeholder:this.props.placeholder,value:this.state.value,onChange:this.handleChange})})]})}}]),n}(i.a.Component),f={resourceType:"Questionnaire",title:"questionnaireTitle",name:"isbar-simple",status:"draft",item:[{linkid:"1",text:"I:Identify",type:"text"},{linkid:"2",text:"S:Situation",type:"text"},{linkid:"3",text:"O:Observation",type:"text"},{linkid:"4",text:"B:Background",type:"text"},{linkid:"5",text:"A:Assessment",type:"text"},{linkid:"6",text:"R:Recommendation",type:"text"}]};var g=n(31),S=g.d.create({page:{backgroundColor:"#FFFFFF",margin:10,padding:20},section:{margin:15},heading:{fontSize:"16pt"}}),k=function(e){var t=["N/A","N/A","N/A","N/A","N/A"];return e.content.item.forEach((function(e,n){"undefined"!==typeof e.answer&&(t[n]=e.answer[0].valueString)})),Object(b.jsx)(g.a,{children:Object(b.jsxs)(g.c,{size:"A4",style:S.page,children:[Object(b.jsxs)(g.f,{style:S.section,children:[Object(b.jsx)(g.e,{style:S.heading,children:"I: Introduction"}),Object(b.jsx)(g.e,{children:t[0]})]}),Object(b.jsxs)(g.f,{style:S.section,children:[Object(b.jsx)(g.e,{style:S.heading,children:"S: Situation"}),Object(b.jsx)(g.e,{children:t[1]})]}),Object(b.jsxs)(g.f,{style:S.section,children:[Object(b.jsx)(g.e,{style:S.heading,children:"B: Background"}),Object(b.jsx)(g.e,{children:t[2]})]}),Object(b.jsxs)(g.f,{style:S.section,children:[Object(b.jsx)(g.e,{style:S.heading,children:"A: Assessment"}),Object(b.jsx)(g.e,{children:t[3]})]}),Object(b.jsxs)(g.f,{style:S.section,children:[Object(b.jsx)(g.e,{style:S.heading,children:"R: Recommendation"}),Object(b.jsx)(g.e,{children:t[4]})]})]})})},y=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={loaded:!1,error:null,responseExist:!1,patient:null,questionnaire:null,questionnaireResponse:null,isIsobar:!1,saveState:"edited",formState:"ISOBAR"},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.context.client;t.request("Questionnaire?name="+f.name).then((function(e){return console.log("Questionnaires:"),console.log(e),0===e.total?t.create(f):e.entry[0].resource})).then((function(n){return e.setState({questionnaire:n}),t.request("QuestionnaireResponse?source=Patient/"+e.context.client.patient.id)})).then((function(n){var a,i,s;return console.log("Questionnaire Responses:"),console.log(n),n.total>0&&n.entry.some((function(t){return a=t.resource,e.checkExistingResponse(t.resource)}))?(console.log("Selected Response"),console.log(a),a):(console.log("No ISBAR questionnaire response from this patient. Creating one.."),t.create((i=e.state.questionnaire.id,s=e.context.client.patient.id,{resourceType:"QuestionnaireResponse",text:{name:"isbar-simple-response"},questionnaire:"Questionnaire/"+i,status:"in-progress",source:{reference:"Patient/"+s},item:[{linkId:"1",text:"I:Identify",answer:[{valueString:""}]},{linkId:"2",text:"S:Situation",answer:[{valueString:""}]},{linkId:"3",text:"O:Observation",answer:[{valueString:""}]},{linkId:"4",text:"B:Background",answer:[{valueString:""}]},{linkId:"5",text:"A:Assessment",answer:[{valueString:""}]},{linkId:"6",text:"R:Recommendation",answer:[{valueString:""}]}]})))})).then((function(t){console.log("Questionnaire response result"),console.log(t),e.setState({questionnaireResponse:t,loaded:!0,error:null})})).catch((function(t){console.error(t),e.setState({error:t,loaded:!1})}))}},{key:"checkExistingResponse",value:function(e){return e.source.reference==="Patient/"+this.context.client.patient.id&&e.questionnaire==="Questionnaire/"+this.state.questionnaire.id}},{key:"updateResponse",value:function(){var e=this;console.log("Updated response: "+JSON.stringify(this.state.questionnaireResponse)),this.context.client.update(this.state.questionnaireResponse).then((function(t){console.log(t),e.setState({saveState:"saved"})})).catch(console.error)}},{key:"handleChange",value:function(e,t){var n=this.state.questionnaireResponse;n.item[t].hasOwnProperty("answer")?n.item[t].answer[0].valueString=e.target.value:n.item[t].answer=[{valueString:e.target.value}],this.setState({questionnaireResponse:n}),"saved"===this.state.saveState&&this.setState({saveState:"edited"})}},{key:"printPDF",value:function(){}},{key:"render",value:function(){var e=this;return this.state.loaded?Object(b.jsxs)("div",{className:"container",children:[Object(b.jsxs)("div",{id:"simple-header",children:[Object(b.jsx)("button",{id:"go-back-button",onClick:this.props.goBack,children:" Back to Menu "}),Object(b.jsx)("h1",{children:"ISBAR"}),Object(b.jsxs)("div",{id:"simple-header-content",children:[Object(b.jsxs)("p",{className:"simple-state",children:["State:",this.state.saveState]}),Object(b.jsxs)("label",{className:"simple-toggle",children:["Is ISOBAR:",Object(b.jsx)("input",{name:"isISOBAR",type:"checkbox",checked:this.state.isIsobar,onChange:function(){return e.setState((function(e){return{isIsobar:!e.isIsobar}}))}})]})]})]}),Object(b.jsx)(v,{index:"0",formID:"introduction",label:"Introduction",placeholder:"Introduction",item:this.state.questionnaireResponse.item[0],handleChange:this.handleChange.bind(this)}),Object(b.jsx)(v,{index:"1",formID:"situation",label:"Situation",placeholder:"Situation",item:this.state.questionnaireResponse.item[1],handleChange:this.handleChange.bind(this)}),Object(b.jsx)(v,{index:"2",formID:"Observation",label:"Observation",placeholder:"Observation",item:this.state.questionnaireResponse.item[2],render:this.state.isIsobar,handleChange:this.handleChange.bind(this)}),Object(b.jsx)(v,{index:"3",formID:"background",label:"Background",placeholder:"Background",item:this.state.questionnaireResponse.item[3],handleChange:this.handleChange.bind(this)}),Object(b.jsx)(v,{index:"4",formID:"assessment",label:"Assessment",placeholder:"Assessment",item:this.state.questionnaireResponse.item[4],handleChange:this.handleChange.bind(this)}),Object(b.jsx)(v,{index:"5",formID:"recommendation",label:"Recommendation",placeholder:"Recommendation",item:this.state.questionnaireResponse.item[5],handleChange:this.handleChange.bind(this)}),Object(b.jsx)("button",{className:"isbar-save",onClick:function(){return e.updateResponse()},children:"Save"}),Object(b.jsx)("button",{className:"isbar-save",children:Object(b.jsx)(g.b,{document:Object(b.jsx)(k,{content:this.state.questionnaireResponse}),fileName:"isbar.pdf",children:function(e){e.blob,e.url;var t=e.loading;e.error;return t?"Preparing":"Print"}})})]}):Object(b.jsx)("div",{className:"loading-container",children:"Loading simple ISBAR form..."})}}]),n}(i.a.Component);y.contextType=O;var C=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,e)}return Object(o.a)(n,[{key:"render",value:function(){return Object(b.jsx)("div",{children:"Assessment"})}}]),n}(i.a.Component),I=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,e)}return Object(o.a)(n,[{key:"render",value:function(){return Object(b.jsx)("div",{children:"Background"})}}]),n}(i.a.Component),R=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,e)}return Object(o.a)(n,[{key:"render",value:function(){return Object(b.jsx)("div",{children:"Introduction is changed"})}}]),n}(i.a.Component),N=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,e)}return Object(o.a)(n,[{key:"render",value:function(){return Object(b.jsx)("div",{children:"Recommendation"})}}]),n}(i.a.Component),A=n(44),B=(n(235),n(237),n(250));function q(e){var t=e.name,n=void 0===t?[]:t,a=n.find((function(e){return"official"===e.use}))||n[0];return a?Object(b.jsx)("h1",{children:a.given.join(" ")+" "+a.family}):Object(b.jsx)("h1",{children:"No Name"})}function w(e){return Object(b.jsxs)("div",{children:[Object(b.jsx)(q,{name:e.name}),Object(b.jsxs)("span",{children:["Gender: ",Object(b.jsx)("b",{children:e.gender}),","," "]}),Object(b.jsxs)("span",{children:["DOB: ",Object(b.jsx)("b",{children:e.birthDate})]})]})}var D=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={loading:!0,patient:null,error:null},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.context.client;this._loader=t.patient.read().then((function(t){e.setState({patient:t,loading:!1,error:null})})).catch((function(t){e.setState({error:t,loading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.error,n=e.loading,a=e.patient;return n?null:t?t.message:Object(b.jsx)(w,Object(B.a)({},a))}}]),n}(i.a.Component);D.contextType=O;var P=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={loaded:!1,error:null,responseExist:!1,patient:null,questionnaire:null,questionnaireResponse:null,isIsobar:!1,saveState:"edited",formState:"ISOBAR"},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this.context.client;console.log("Patient id Test"+this.context.client.patient.id),console.log("Patient id Test2"+e.request("Patient/".concat(this.context.client.patient.id))),console.log("Patient name"+Object(b.jsx)(D,{}))}},{key:"render",value:function(){var e;return Object(b.jsxs)("div",{class:"container  mx-auto px-10 sm:px-0 max-w-7xl py-50",children:[Object(b.jsx)("h2",{class:"text-2xl font semi-bold font-sans",children:"Patient Details"}),Object(b.jsx)("h2",{id:"patient"}),Object(b.jsx)(D,{}),Object(b.jsxs)("mb-fhir-form",{class:"flex flex gap-3",children:[Object(b.jsx)("mb-context",{path:"resourceType"}),Object(b.jsx)("mb-input",(e={path:!0},Object(A.a)(e,"path","name[0].given"),Object(A.a)(e,"label","Name"),e))]})]})}}]),n}(i.a.Component);P.contextType=O;i.a.Component;var M=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,e)}return Object(o.a)(n,[{key:"render",value:function(){switch(this.props.current){case"I":return Object(b.jsx)(R,{});case"S":return Object(b.jsx)(P,{});case"B":return Object(b.jsx)(I,{});case"A":return Object(b.jsx)(C,{});case"R":return Object(b.jsx)(N,{});default:return Object(b.jsx)(R,{})}}}]),n}(i.a.Component),T=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={current:"I",loaded:!1},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.context.client;this.LoadCarePlan().then((function(t){console.log(t),e.setState({loaded:!0})}))}},{key:"LoadCarePlan",value:function(){return this.context.client.request("CarePlan?patient="+this.context.client.patient.id)}},{key:"render",value:function(){var e=this;return this.state.loaded?Object(b.jsxs)("div",{className:"app-complex",children:[Object(b.jsx)("div",{className:"app-content",children:Object(b.jsx)(M,{current:this.state.current})}),Object(b.jsxs)("div",{className:"footer",children:[Object(b.jsx)("div",{className:"arrow",children:"\u2190"}),Object(b.jsx)("button",{className:"nav-button",onClick:function(){return e.setState({current:"I"})},children:"I"}),Object(b.jsx)("button",{className:"nav-button",onClick:function(){return e.setState({current:"S"})},children:"S"}),Object(b.jsx)("button",{className:"nav-button",onClick:function(){return e.setState({current:"B"})},children:"B"}),Object(b.jsx)("button",{className:"nav-button",onClick:function(){return e.setState({current:"A"})},children:"A"}),Object(b.jsx)("button",{className:"nav-button",onClick:function(){return e.setState({current:"R"})},children:"R"}),Object(b.jsx)("div",{className:"arrow",children:"\u2192"})]})]}):Object(b.jsx)("div",{children:"Loading complex isbar form..."})}}]),n}(i.a.Component);T.contextType=O;var F=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(b.jsx)(x,{children:Object(b.jsx)(Q,{})})}}]),n}(i.a.Component),Q=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={isMenu:!0,isSimple:!0},a}return Object(o.a)(n,[{key:"backToMenu",value:function(){this.setState({isMenu:!0})}},{key:"render",value:function(){var e=this;return this.state.isMenu?Object(b.jsxs)("div",{className:"main-menu-container",children:[Object(b.jsx)("h2",{className:"menu-title",children:"ISBAR Form"}),Object(b.jsx)("button",{className:"main-menu-button",onClick:function(){return e.setState({isSimple:!0,isMenu:!1})},children:"Simple ISBAR"}),Object(b.jsx)("button",{className:"main-menu-button",onClick:function(){return e.setState({isSimple:!1,isMenu:!1})},children:"Complex ISBAR"})]}):this.state.isSimple?Object(b.jsx)(y,{goBack:this.backToMenu.bind(this)}):Object(b.jsx)(T,{})}}]),n}(i.a.Component),L=(n(448),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(b.jsx)(d.a,{children:Object(b.jsxs)(h.c,{children:[Object(b.jsx)(h.a,{path:"/isbar-app",component:F,exact:!0}),Object(b.jsx)(h.a,{path:"/",component:p,exact:!0})]})})}}]),n}(i.a.Component));r.a.render(Object(b.jsx)(L,{}),document.getElementById("root"))}},[[453,1,2]]]);
//# sourceMappingURL=main.ea8081f2.chunk.js.map