(this["webpackJsonpisbar-complex-react"]=this["webpackJsonpisbar-complex-react"]||[]).push([[0],{315:function(e,t,n){},371:function(e,t){},373:function(e,t){},414:function(e,t){},415:function(e,t){},504:function(e){e.exports=JSON.parse("{}")},509:function(e,t,n){},511:function(e,t,n){"use strict";n.r(t);var i=n(1),a=n.n(i),c=n(85),r=n.n(c),s=(n(315),n(26)),o=n(27),l=n(30),u=n(29),j=n(295),d=n(41),h=n(99),b=n(3),O=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){h.oauth2.authorize({clientId:"my-client-id",scope:"launch openid fhirUser patient/*.read patient/*.write",redirectUri:"./isbar-app",completeInTarget:!0})}},{key:"render",value:function(){return Object(b.jsx)("div",{className:"loading-container",children:"Launching the ISBAR handover form.."})}}]),n}(a.a.Component),p=a.a.createContext({}),x=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(s.a)(this,n),(i=t.call(this,e)).state={client:null,error:null,simpleForms:null,complexForms:null},i}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;h.oauth2.ready().then((function(t){return e.setState({client:t})}),(function(t){return e.setState({error:t})}))}},{key:"render",value:function(){var e=this;return Object(b.jsx)(p.Provider,{value:this.state||{},children:Object(b.jsx)(p.Consumer,{children:function(t){var n=t.client,i=t.error;return console.log("Client"),console.log(n),i?Object(b.jsx)("pre",{children:i.stack}):n?e.props.children:Object(b.jsx)("div",{className:"loading-container",children:"Launching the ISBAR handover form.."})}})})}}]),n}(a.a.Component),m=n(149),f={resourceType:"Questionnaire",title:"questionnaireTitle",name:"isbar-simple",status:"active",item:[{linkid:"1",text:"I:Identify",type:"text"},{linkid:"2",text:"S:Situation",type:"text"},{linkid:"3",text:"O:Observation",type:"text"},{linkid:"4",text:"B:Background",type:"text"},{linkid:"5",text:"A:Assessment",type:"text"},{linkid:"6",text:"R:Recommendation",type:"text"}]};var v=n(42),g=v.d.create({page:{backgroundColor:"#FFFFFF",margin:10,padding:20},section:{margin:15},heading:{fontSize:"16pt"}}),y=function(e){var t=["N/A","N/A","N/A","N/A","N/A"];return e.content.item.forEach((function(e,n){"undefined"!==typeof e.answer&&(t[n]=e.answer[0].valueString)})),Object(b.jsx)(v.a,{children:Object(b.jsxs)(v.c,{size:"A4",style:g.page,children:[Object(b.jsxs)(v.f,{style:g.section,children:[Object(b.jsx)(v.e,{style:g.heading,children:"I: Introduction"}),Object(b.jsx)(v.e,{children:t[0]})]}),Object(b.jsxs)(v.f,{style:g.section,children:[Object(b.jsx)(v.e,{style:g.heading,children:"S: Situation"}),Object(b.jsx)(v.e,{children:t[1]})]}),Object(b.jsxs)(v.f,{style:g.section,children:[Object(b.jsx)(v.e,{style:g.heading,children:"B: Background"}),Object(b.jsx)(v.e,{children:t[2]})]}),Object(b.jsxs)(v.f,{style:g.section,children:[Object(b.jsx)(v.e,{style:g.heading,children:"A: Assessment"}),Object(b.jsx)(v.e,{children:t[3]})]}),Object(b.jsxs)(v.f,{style:g.section,children:[Object(b.jsx)(v.e,{style:g.heading,children:"R: Recommendation"}),Object(b.jsx)(v.e,{children:t[4]})]})]})})},S=n(558),k=(n(504),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(s.a)(this,n),(i=t.call(this,e)).state={loaded:!1,error:null,content:null,isIsobar:!1,saved:"edited",formState:"ISOBAR"},i.updateResponse=i.updateResponse.bind(Object(m.a)(i)),i}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.context.client.user.read().then(console.log),this.setState({content:this.props.content})}},{key:"checkExistingResponse",value:function(e){return e.source.reference==="Patient/"+this.context.client.patient.id&&e.questionnaire==="Questionnaire/"+this.state.questionnaire.id}},{key:"updateResponse",value:function(e,t){var n=this.state.content;n.item[t].hasOwnProperty("answer")?n.item[t].answer[0].valueString=e.target.value:n.item[t].answer=[{valueString:e.target.value}],this.setState({content:n}),"saved"===this.state.saved&&this.setState({saved:"edited"})}},{key:"getFieldValue",value:function(e){return this.state.content.item[e].hasOwnProperty("answer")?this.state.content.item[e].answer[0].valueString:""}},{key:"render",value:function(){var e=this;return this.state.loaded?Object(b.jsxs)("div",{className:"container",children:[Object(b.jsxs)("div",{id:"simple-header",children:[Object(b.jsx)("button",{id:"go-back-button",onClick:this.props.goBack,children:" Back to Menu "}),Object(b.jsx)("h1",{children:"ISBAR"}),Object(b.jsxs)("div",{id:"simple-header-content",children:[Object(b.jsxs)("p",{className:"simple-state",children:["State:",this.state.saved]}),Object(b.jsxs)("label",{className:"simple-toggle",children:["Is ISOBAR:",Object(b.jsx)("input",{name:"isISOBAR",type:"checkbox",checked:this.state.isIsobar,onChange:function(){return e.setState((function(e){return{isIsobar:!e.isIsobar}}))}})]})]})]}),Object(b.jsx)(S.a,{fullWidth:!0,multiline:!0,placeholder:"Introduction",value:this.getFieldValue(0),onChange:function(t){return e.updateResponse(t,0)}}),Object(b.jsx)(S.a,{fullWidth:!0,multiline:!0,placeholder:"Situation",value:this.getFieldValue(1),onChange:function(t){return e.updateResponse(t,1)}}),Object(b.jsx)(S.a,{fullWidth:!0,multiline:!0,placeholder:"Observation",value:this.getFieldValue(2),onChange:function(t){return e.updateResponse(t,2)}}),Object(b.jsx)(S.a,{fullWidth:!0,multiline:!0,placeholder:"Background",value:this.getFieldValue(3),onChange:function(t){return e.updateResponse(t,3)}}),Object(b.jsx)(S.a,{fullWidth:!0,multiline:!0,placeholder:"Assessment",value:this.getFieldValue(4),onChange:function(t){return e.updateResponse(t,4)}}),Object(b.jsx)(S.a,{fullWidth:!0,multiline:!0,placeholder:"Recommendation",value:this.getFieldValue(5),onChange:function(t){return e.updateResponse(t,5)}}),Object(b.jsx)("button",{className:"isbar-save",onClick:function(){return e.updateResponse()},children:"Save"}),Object(b.jsx)("button",{className:"isbar-save",children:Object(b.jsx)(v.b,{document:Object(b.jsx)(y,{content:this.state.content}),fileName:"isbar.pdf",children:function(e){e.blob,e.url;var t=e.loading;e.error;return t?"Preparing":"Print"}})})]}):Object(b.jsx)("div",{className:"loading-container",children:"Loading simple ISBAR form..."})}}]),n}(a.a.Component));k.contextType=p;var C=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(s.a)(this,n),t.call(this,e)}return Object(o.a)(n,[{key:"render",value:function(){return Object(b.jsx)("div",{children:"Assessment"})}}]),n}(a.a.Component),I=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(s.a)(this,n),t.call(this,e)}return Object(o.a)(n,[{key:"render",value:function(){return Object(b.jsx)("div",{children:"Background"})}}]),n}(a.a.Component),R=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(s.a)(this,n),t.call(this,e)}return Object(o.a)(n,[{key:"render",value:function(){return Object(b.jsx)("div",{children:"Introduction is changed"})}}]),n}(a.a.Component),N=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(s.a)(this,n),t.call(this,e)}return Object(o.a)(n,[{key:"render",value:function(){return Object(b.jsx)("div",{class:"container  mx-auto px-10 sm:px-8 max-w-7xl py-10",children:Object(b.jsx)("sl-form",{children:Object(b.jsx)("sl-textarea",{rows:4})})})}}]),n}(a.a.Component),A=n(24),B=n(562),w=n(560),D=n(557),F=n(559),P=n(556);function M(){var e=a.a.useState(""),t=Object(A.a)(e,2),n=t[0],i=t[1];return Object(b.jsx)(B.a,{sx:{minWidth:120},children:Object(b.jsxs)(F.a,{fullWidth:!0,children:[Object(b.jsx)(w.a,{id:"airwaySelect",children:"Airway"}),Object(b.jsxs)(P.a,{labelId:"Airway",id:"airwaySelect",value:n,label:"Options",onChange:function(e){i(e.target.value)},children:[Object(b.jsx)(D.a,{value:10,children:"Patent"}),Object(b.jsx)(D.a,{value:20,children:"Compromised"}),Object(b.jsx)(D.a,{value:30,children:"Ventilated"})]})]})})}var W=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(s.a)(this,n),(i=t.call(this,e)).state={loaded:!1,error:null,responseExist:!1,patient:null,questionnaire:null,questionnaireResponse:null,isIsobar:!1,saveState:"edited",formState:"ISOBAR"},i}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.context.client}},{key:"render",value:function(){return Object(b.jsxs)("div",{className:"container  mx-auto px-10 sm:px-8 max-w-7xl py-10",children:[Object(b.jsx)("h1",{children:"Situation"}),Object(b.jsx)("h3",{children:"Patient Status"}),Object(b.jsx)(S.a,{fullWidth:!0,multiline:!0,placeholder:"Patient Status"}),Object(b.jsx)("h3",{children:"Principle Diagnosis"}),Object(b.jsx)(S.a,{fullWidth:!0,multiline:!0,placeholder:"Principle Diagnosis"}),Object(b.jsx)("h3",{children:"Other Diagnosis/problems"}),Object(b.jsx)(S.a,{fullWidth:!0,multiline:!0,placeholder:"Other Diagnosis/problems"}),Object(b.jsx)("h3",{children:"Reason For transfer"}),Object(b.jsx)(S.a,{fullWidth:!0,multiline:!0,placeholder:"Reason For transfer"}),Object(b.jsx)("h3",{children:"Observations"}),Object(b.jsx)(M,{})]})}}]),n}(a.a.Component);W.contextType=p;var q=n(294);function T(e){var t=e.name,n=void 0===t?[]:t,i=n.find((function(e){return"official"===e.use}))||n[0];return i?Object(b.jsx)("h1",{children:i.given.join(" ")+" "+i.family}):Object(b.jsx)("h1",{children:"No Name"})}function V(e){return console.log(e),Object(b.jsxs)("div",{children:[Object(b.jsx)(T,{name:e.name}),Object(b.jsxs)("span",{children:["Gender: ",Object(b.jsx)("b",{children:e.gender})," "]}),Object(b.jsxs)("span",{children:["DOB: ",Object(b.jsx)("b",{children:e.birthDate})]}),Object(b.jsxs)("span",{children:["DOB: ",Object(b.jsx)("b",{children:e.address[0].city})]})]})}var L=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(s.a)(this,n),(i=t.call(this,e)).state={loading:!0,patient:null,error:null},i}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.context.client;this._loader=t.patient.read().then((function(t){e.setState({patient:t,loading:!1,error:null})})).catch((function(t){e.setState({error:t,loading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.error,n=e.loading,i=e.patient;return n?null:t?t.message:Object(b.jsx)(V,Object(q.a)({},i))}}]),n}(a.a.Component);L.contextType=p;var Q=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(s.a)(this,n),t.call(this,e)}return Object(o.a)(n,[{key:"render",value:function(){return Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)(L,{}),Object(b.jsx)(R,{}),Object(b.jsx)(W,{}),Object(b.jsx)(I,{}),Object(b.jsx)(C,{}),Object(b.jsx)(N,{})]})}}]),n}(a.a.Component),E=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(s.a)(this,n),t.call(this,e)}return Object(o.a)(n,[{key:"render",value:function(){switch(this.props.current){case"I":return Object(b.jsx)(R,{});case"S":return Object(b.jsx)(W,{});case"B":return Object(b.jsx)(I,{});case"A":return Object(b.jsx)(C,{});case"R":return Object(b.jsx)(N,{});default:return Object(b.jsx)(R,{})}}}]),n}(a.a.Component);(function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(s.a)(this,n),(i=t.call(this,e)).state={current:"I",loaded:!1,carePlan:null},i}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.context.client;this.LoadCarePlan().then((function(t){console.log(t),e.setState({loaded:!0})}))}},{key:"LoadCarePlan",value:function(){return this.context.client.request("CarePlan?patient="+this.context.client.patient.id).then((function(e){}))}},{key:"render",value:function(){var e=this;return this.state.loaded?Object(b.jsxs)("div",{className:"app-complex",children:[Object(b.jsx)("div",{className:"app-content",children:Object(b.jsx)(E,{current:this.state.current})}),Object(b.jsxs)("div",{className:"footer",children:[Object(b.jsx)("div",{className:"arrow",children:"\u2190"}),Object(b.jsx)("button",{className:"nav-button",onClick:function(){return e.setState({current:"I"})},children:"I"}),Object(b.jsx)("button",{className:"nav-button",onClick:function(){return e.setState({current:"S"})},children:"S"}),Object(b.jsx)("button",{className:"nav-button",onClick:function(){return e.setState({current:"B"})},children:"B"}),Object(b.jsx)("button",{className:"nav-button",onClick:function(){return e.setState({current:"A"})},children:"A"}),Object(b.jsx)("button",{className:"nav-button",onClick:function(){return e.setState({current:"R"})},children:"R"}),Object(b.jsx)("div",{className:"arrow",children:"\u2192"})]})]}):Object(b.jsx)("div",{children:"Loading complex isbar form..."})}}]),n}(a.a.Component)).contextType=p;var z=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(b.jsx)(x,{children:Object(b.jsx)(J,{})})}}]),n}(a.a.Component),J=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(s.a)(this,n),(i=t.call(this,e)).state={loaded:!1,isMenu:!0,isSimple:!0,simpleResponses:null,questionnaireID:null},i}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.loadQuestionnaireID().then((function(t){return e.loadSimpleIsbars(t)}));Promise.all([t]).then((function(){return console.log("all loaded")}))}},{key:"backToMenu",value:function(){this.setState({isMenu:!0})}},{key:"loadQuestionnaireID",value:function(){var e=this;return this.context.client.request("Questionnaire?name="+f.name).then((function(t){return console.log(t),0===t.total?e.context.client.create(f):t.entry[0].resource})).then((function(t){return e.setState({questionnaireID:t.id}),t.id}))}},{key:"loadSimpleIsbars",value:function(e){var t=this;return this.context.client.patient.request("QuestionnaireResponse?questionnaire="+e).then((function(e){return t.setState({simpleResponses:e}),e}))}},{key:"createSimpleIsbar",value:function(){}},{key:"render",value:function(){var e=this;return this.state.isMenu?Object(b.jsxs)("div",{className:"main-menu-container",children:[Object(b.jsx)("h2",{className:"menu-title",children:"ISBAR Form"}),Object(b.jsx)("button",{className:"main-menu-button",onClick:function(){return e.setState({isSimple:!0,isMenu:!1})},children:"Simple ISBAR"}),Object(b.jsx)("button",{className:"main-menu-button",onClick:function(){return e.setState({isSimple:!1,isMenu:!1})},children:"Complex ISBAR"})]}):this.state.isSimple?Object(b.jsx)(k,{goBack:this.backToMenu.bind(this),content:"content"}):Object(b.jsx)(Q,{})}}]),n}(a.a.Component);J.contextType=p;n(509);var U=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(b.jsx)(j.a,{children:Object(b.jsxs)(d.c,{children:[Object(b.jsx)(d.a,{path:"/isbar-app",component:z,exact:!0}),Object(b.jsx)(d.a,{path:"/",component:O,exact:!0})]})})}}]),n}(a.a.Component);r.a.render(Object(b.jsx)(U,{}),document.getElementById("root"))}},[[511,1,2]]]);
//# sourceMappingURL=main.01a8b30f.chunk.js.map